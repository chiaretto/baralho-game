(function(a){function t(t){for(var e,i,o=t[0],u=t[1],h=t[2],d=0,l=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&l.push(s[i][0]),s[i]=0;for(e in u)Object.prototype.hasOwnProperty.call(u,e)&&(a[e]=u[e]);c&&c(t);while(l.length)l.shift()();return r.push.apply(r,h||[]),n()}function n(){for(var a,t=0;t<r.length;t++){for(var n=r[t],e=!0,o=1;o<n.length;o++){var u=n[o];0!==s[u]&&(e=!1)}e&&(r.splice(t--,1),a=i(i.s=n[0]))}return a}var e={},s={app:0},r=[];function i(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return a[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=a,i.c=e,i.d=function(a,t,n){i.o(a,t)||Object.defineProperty(a,t,{enumerable:!0,get:n})},i.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i.t=function(a,t){if(1&t&&(a=i(a)),8&t)return a;if(4&t&&"object"===typeof a&&a&&a.__esModule)return a;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:a}),2&t&&"string"!=typeof a)for(var e in a)i.d(n,e,function(t){return a[t]}.bind(null,e));return n},i.n=function(a){var t=a&&a.__esModule?function(){return a["default"]}:function(){return a};return i.d(t,"a",t),t},i.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var h=0;h<o.length;h++)t(o[h]);var c=u;r.push([0,"chunk-vendors"]),n()})({0:function(a,t,n){a.exports=n("56d7")},"034f":function(a,t,n){"use strict";var e=n("85ec"),s=n.n(e);s.a},"56d7":function(a,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var e=n("2b0e"),s=function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{attrs:{id:"app"}},[n("nav",{staticClass:"navbar navbar-light bg-light",attrs:{id:"navbar-example"}},[n("span",{attrs:{id:"curinga"}},a._l(a.curingas,(function(t){return n("div",{key:t,staticClass:"card",class:a.quemTemPoe?"quemTemPoe "+a.extrairNype(t):a.extrairNype(t)},[n("p",[a._v(a._s(a.extrairCarta(t)))])])})),0),n("span",{attrs:{id:"jogadores"}},a._l(a.jogadores,(function(t,e){return n("div",{key:t.nome,staticClass:"jogador",class:t.dealer?"dealer":"",attrs:{title:t.admin?"Admin":""}},[n("span",{staticClass:"foto"},[n("img",{attrs:{src:"https://avatars.dicebear.com/api/bottts/"+t.nome+".png",alt:""}})]),n("span",{staticClass:"nome",class:t.admin?"admin":""},[a._v(a._s(t.nome))]),n("span",{staticClass:"qtdCartas badge",class:"cor-"+t.quantidadeCartas,attrs:{title:"Quantidade cartas"}},[a._v(a._s(t.quantidadeCartas))]),n("span",{staticClass:"qtdPontos badge badge-dark",attrs:{title:"Vitorias"}},[a._v(a._s(t.pontosRodada)+"pts")]),a.isAdmin&&!t.admin?n("span",{staticClass:"removerJogador",on:{click:function(t){return a.removerJogador(e)}}},[a._v("Remover")]):a._e()])})),0),n("ul",{staticClass:"nav nav-pills"},[n("li",{staticClass:"nav-item"},[a.estaLogado?n("input",{staticClass:"btn btn-sm btn-success",attrs:{type:"button",value:"Dar Cartas"},on:{click:function(t){return a.embaralhar()}}}):a._e()]),n("li",{staticClass:"nav-item"},[a.estaLogado&&!a.existeAdmin?n("input",{staticClass:"btn btn-sm btn-warning",attrs:{type:"button",value:"Virar Admin"},on:{click:function(t){return a.virarAdmin()}}}):a._e(),a.estaLogado&&a.existeAdmin&&this.isAdmin?n("input",{staticClass:"btn btn-sm btn-warning",attrs:{type:"button",value:"Largar Admin"},on:{click:function(t){return a.largarAdmin()}}}):a._e()]),n("li",{staticClass:"nav-item"},[a.estaLogado?a._e():n("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:function(t){return a.entrar()}}},[a._v("Entrar")]),a.estaLogado?n("input",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button",value:"Sair"},on:{click:function(t){return a.sair()}}}):a._e()])])]),n("div",{attrs:{id:"mesa"}},[n("div",{staticClass:"hand grow"},a._l(a.mesa,(function(t,e){return n("div",{key:e,staticClass:"card",class:a.classeCarta(e,t),attrs:{title:"Click na carta vencedora"},on:{click:function(t){return a.setarGanhador(e)}}},[n("p",[a._v(a._s(a.extrairCarta(t.carta)))]),n("span",[a._v(a._s(t.jogador))])])})),0)]),a.estaLogado?n("div",{attrs:{id:"minhas"}},[n("div",{staticClass:"hand grow"},a._l(a.cartas,(function(t,e){return n("div",{key:e,staticClass:"card",class:a.classeMinhaCarta(t),attrs:{title:"Click para jogar a carta"},on:{click:function(n){return a.jogar(e,t)}}},[n("p",[a._v(a._s(a.extrairCarta(t)))])])})),0)]):a._e()])},r=[],i=(n("4de4"),n("13d5"),n("bc3a")),o=n.n(i),u={name:"App",data:function(){return{host:"",nome:null,senha:null,admin:!1,dealer:!1,quantidade:0,mesa:[],curingas:[],jogadores:[],cartas:[],jogando:!1,setandoGanhador:!1,virandoAdmin:!1,largandoAdmin:!1,removendoJogador:!1}},components:{},mounted:function(){var a=this;window.localStorage&&window.localStorage.getItem("nome")&&window.localStorage.getItem("senha")&&(this.nome=window.localStorage.getItem("nome"),this.senha=window.localStorage.getItem("senha")),setInterval((function(){a.sala(),a.getCartas()}),1e3)},computed:{estaLogado:function(){return null!=this.nome&&null!=this.senha},existeAdmin:function(){var a=this.jogadores.filter((function(a){return 1==a.admin}));return a.length>0},isAdmin:function(){return!0===this.admin},isDealer:function(){return!0===this.dealer},quemTemPoe:function(){return!(!this.mesa.length||!this.curingas.length)&&this.extrairNype(this.mesa[0].carta)===this.extrairNype(this.curingas[0])}},methods:{minhaCartaECuringa:function(a){return!!this.curingas.length&&this.extrairNype(a)===this.extrairNype(this.curingas[0])},extrairNype:function(a){if(a){var t="1"==a.substr(0,1)?a.substr(2,1):a.substr(1,1);switch(t){case"♦":return"suitdiamonds";case"♥":return"suithearts";case"♣":return"suitclubs";case"♠":return"suitspades";default:return"0"}}},extrairBaralho:function(a){return"1"==a.substr(0,1)?a.substr(3,1):a.substr(2,1)},extrairCarta:function(a){return"1"==a.substr(0,1)?a.substr(0,2):a.substr(0,1)},entrar:function(){var a=this,t=prompt("Seu nome ?");void 0!=t&&""!=t&&(this.nome=t,o.a.post(this.host+"/salas/entrar",{nome:this.nome}).then((function(t){a.senha=t.data.senha,window.localStorage.setItem("nome",a.nome),window.localStorage.setItem("senha",a.senha)})))},sair:function(){var a=this;o.a.post(this.host+"/salas/sair",{nome:this.nome,senha:this.senha}).then((function(){a.nome=null,a.senha=null,a.cartas=[],window.localStorage.removeItem("nome"),window.localStorage.removeItem("senha")}))},embaralhar:function(){var a=prompt("Quantas cartas ?");void 0!=a&&""!=a&&o.a.post(this.host+"/salas/embaralhar",{quantidade:a,nome:this.nome,senha:this.senha})},possoJogar:function(){var a=this.jogadores.reduce((function(a,t){return a.quantidadeCartas>t.quantidadeCartas?a.quantidadeCartas:t.quantidadeCartas}));return void 0!==a.quantidadeCartas&&(a=a.quantidadeCartas),console.log(this.mesa.length,this.jogadores.length,a),this.cartas.length>=a&&this.mesa.length<this.jogadores.length},tenhoCuringa:function(){var a=this;if(this.curingas.length){var t=this.cartas.filter((function(t){return a.extrairNype(t)===a.extrairNype(a.curingas[0])}));return t.length>0}return!1},classeMinhaCarta:function(a){return this.quemTemPoe&&this.minhaCartaECuringa(a)&&this.possoJogar()?"quemTemPoe "+this.extrairNype(a):this.quemTemPoe&&!this.minhaCartaECuringa(a)&&this.tenhoCuringa()?"cartaBloqueada "+this.extrairNype(a):!this.quemTemPoe||this.minhaCartaECuringa(a)||this.tenhoCuringa()||this.possoJogar()?this.quemTemPoe&&this.minhaCartaECuringa(a)&&this.tenhoCuringa()&&!this.possoJogar()?"cartaBloqueada "+this.extrairNype(a):this.quemTemPoe||this.possoJogar()?this.extrairNype(a):"cartaBloqueada "+this.extrairNype(a):"cartaBloqueada "+this.extrairNype(a)},classeCarta:function(a,t){return this.extrairNype(t.carta)===this.extrairNype(this.curingas[0])&&this.extrairCarta(t.carta)===this.extrairCarta(this.curingas[0])?"quemTemPoeMaster "+this.extrairNype(t.carta):this.extrairNype(t.carta)===this.extrairNype(this.curingas[0])?"quemTemPoe "+this.extrairNype(t.carta):this.extrairNype(t.carta)},cartaPermitida:function(a){return this.quemTemPoe&&this.minhaCartaECuringa(a)&&this.possoJogar()||this.quemTemPoe&&!this.minhaCartaECuringa(a)&&!this.tenhoCuringa()&&this.possoJogar()||!this.quemTemPoe&&this.possoJogar()},jogar:function(a,t){var n=this;!0!==this.jogando&&this.cartaPermitida(t)&&(this.jogando=!0,o.a.post(this.host+"/salas/jogar",{posicaoCarta:a,nome:this.nome,senha:this.senha}).then((function(a){n.sala(),n.cartas=a.data.cartas,n.jogando=!1})))},setarGanhador:function(a){var t=this;!0!==this.setandoGanhador&&this.admin&&(this.setandoGanhador=!0,o.a.post(this.host+"/salas/setarGanhador",{posicaoCartaVencedora:a}).then((function(){t.sala(),t.setandoGanhador=!1})))},virarAdmin:function(){var a=this;!0!==this.virandoAdmin&&(this.virandoAdmin=!0,o.a.post(this.host+"/salas/virarAdmin",{nome:this.nome,senha:this.senha}).then((function(){a.sala(),a.virandoAdmin=!1})))},largarAdmin:function(){var a=this;!0!==this.largandoAdmin&&(this.largandoAdmin=!0,o.a.post(this.host+"/salas/largarAdmin",{nome:this.nome,senha:this.senha}).then((function(){a.sala(),a.largandoAdmin=!1})))},sala:function(){var a=this;o.a.get(this.host+"/salas").then((function(t){t.data&&t.data.mesa&&(a.mesa.length!==t.data.mesa.length&&(a.mesa=t.data.mesa),a.jogadores=t.data.jogadores,a.curingas=t.data.curingas)}))},novaRodada:function(){o.a.post(this.host+"/salas/novaRodada")},removerJogador:function(a){var t=this;!0!==this.removendoJogador&&this.admin&&(this.removendoJogador=!0,o.a.post(this.host+"/salas/removerJogador",{posicaoJogadorRemovido:a}).then((function(){t.sala(),t.removendoJogador=!1})))},getCartas:function(){var a=this;null!=this.nome&&null!=this.senha&&o.a.post(this.host+"/salas/minhasCartas",{nome:this.nome,senha:this.senha}).then((function(t){a.cartas=t.data.cartas,a.dealer=t.data.dealer,a.admin=t.data.admin}))}}},h=u,c=(n("034f"),n("2877")),d=Object(c["a"])(h,s,r,!1,null,null,null),l=d.exports;e["a"].config.productionTip=!1,new e["a"]({render:function(a){return a(l)}}).$mount("#app")},"85ec":function(a,t,n){}});
//# sourceMappingURL=app.d5850a21.js.map